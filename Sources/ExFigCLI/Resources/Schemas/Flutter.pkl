/// Flutter platform configuration for ExFig.
module Flutter

import "Common.pkl"
import "Android.pkl"

/// Flutter image format.
typealias ImageFormat = "svg"|"png"|"webp"

// MARK: - Colors

/// Flutter colors entry configuration.
class ColorsEntry extends Common.VariablesSource {
  /// Override path to custom Stencil templates for this entry.
  /// When set, overrides `FlutterConfig.templatesPath`.
  templatesPath: String?

  /// Output path for generated Dart colors file.
  output: String?

  /// Class name for generated colors.
  className: String? = "AppColors"
}

// MARK: - Icons

/// Flutter icons entry configuration.
class IconsEntry extends Common.FrameSource {
  /// Override path to custom Stencil templates for this entry.
  /// When set, overrides `FlutterConfig.templatesPath`.
  templatesPath: String?

  /// Output directory for icon SVG files.
  output: String(!isEmpty)

  /// Dart file path for icon class generation.
  dartFile: String?

  /// Class name for generated icons.
  className: String? = "AppIcons"

  /// Naming style for icon names.
  nameStyle: Common.NameStyle? = "snake_case"
}

// MARK: - Images

/// Flutter images entry configuration.
class ImagesEntry extends Common.FrameSource {
  /// Override path to custom Stencil templates for this entry.
  /// When set, overrides `FlutterConfig.templatesPath`.
  templatesPath: String?

  /// Output directory for image files.
  output: String(!isEmpty)

  /// Dart file path for image class generation.
  dartFile: String?

  /// Class name for generated images.
  className: String? = "AppImages"

  /// Scale factors to generate (e.g., [1, 2, 3]).
  scales: Listing<Number>? = new Listing { 1; 2; 3 }

  /// Output format for images.
  format: ImageFormat? = "png"

  /// WebP encoding options.
  webpOptions: Android.WebpOptions?

  /// Source format for fetching from Figma API.
  sourceFormat: Common.SourceFormat?

  /// Naming style for generated assets.
  nameStyle: Common.NameStyle? = "snake_case"
}

// MARK: - Flutter Platform Configuration

/// Root Flutter platform configuration.
class FlutterConfig {
  /// Base output directory for all generated files.
  output: String(!isEmpty)

  /// Path to custom Stencil templates.
  templatesPath: String?

  /// Colors configuration entries.
  colors: Listing<ColorsEntry>?

  /// Icons configuration entries.
  icons: Listing<IconsEntry>?

  /// Images configuration entries.
  images: Listing<ImagesEntry>?
}
