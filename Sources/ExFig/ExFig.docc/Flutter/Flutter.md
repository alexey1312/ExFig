# Flutter Export

Export Figma resources to Flutter projects with Dart code and asset files.

## Overview

ExFig exports design resources from Figma to Flutter projects:

- **Colors**: Dart constants with `Color(0xAARRGGBB)` format
- **Icons**: SVG icons with optional dark mode variants
- **Images**: Multi-scale images (1x, 2x, 3x) in PNG, SVG, or WebP format

> Note: Typography export is not currently supported for Flutter.

## Quick Start

### 1. Generate Configuration

```bash
exfig init --platform flutter
```

### 2. Configure Your Project

Edit `exfig.yaml`:

```yaml
figma:
  lightFileId: "YOUR_FILE_ID"
  darkFileId: "YOUR_DARK_FILE_ID"  # optional

flutter:
  output: "lib/generated"

  colors:
    output: "colors.dart"
    className: "AppColors"

  icons:
    output: "assets/icons"
    dartFile: "icons.dart"
    className: "AppIcons"

  images:
    output: "assets/images"
    dartFile: "images.dart"
    className: "AppImages"
    format: png
    scales: [1, 2, 3]
```

### 3. Export Resources

```bash
# Export colors
exfig colors

# Export icons
exfig icons

# Export images
exfig images
```

## Generated Output

### Colors

**lib/generated/colors.dart**

```dart
// Do not edit this file!
// Generated by ExFig

import 'package:flutter/material.dart';

class AppColors {
  AppColors._();
  static const Color primary = Color(0xFF007AFF);
  static const Color secondary = Color(0xFF5856D6);
  static const Color background = Color(0xFFFFFFFF);
  static const Color textPrimary = Color(0xFF000000);
}

class AppColorsDark {
  AppColorsDark._();
  static const Color primary = Color(0xFF0A84FF);
  static const Color secondary = Color(0xFF5E5CE6);
  static const Color background = Color(0xFF000000);
  static const Color textPrimary = Color(0xFFFFFFFF);
}
```

### Icons

**File structure:**

```
assets/
└── icons/
    ├── ic_add.svg
    ├── ic_add_dark.svg
    ├── ic_settings.svg
    └── ic_settings_dark.svg

lib/
└── generated/
    └── icons.dart
```

**icons.dart:**

```dart
// Do not edit this file!
// Generated by ExFig

class AppIcons {
  AppIcons._();
  static const String icAdd = 'assets/icons/ic_add.svg';
  static const String icAddDark = 'assets/icons/ic_add_dark.svg';
  static const String icSettings = 'assets/icons/ic_settings.svg';
}
```

### Images

**File structure:**

```
assets/
└── images/
    ├── logo.png           # 1x scale
    ├── 2.0x/
    │   └── logo.png       # 2x scale
    └── 3.0x/
        └── logo.png       # 3x scale

lib/
└── generated/
    └── images.dart
```

**images.dart:**

```dart
// Do not edit this file!
// Generated by ExFig

class AppImages {
  AppImages._();
  static const String logo = 'assets/images/logo.png';
  static const String hero = 'assets/images/hero.png';
  static const String heroDark = 'assets/images/hero_dark.png';
}
```

## Usage in Flutter

### Using Colors

```dart
import 'package:your_app/generated/colors.dart';

Container(
  color: AppColors.primary,
  // For dark mode:
  // color: AppColorsDark.primary,
)
```

### Using Icons with flutter_svg

```dart
import 'package:flutter_svg/flutter_svg.dart';
import 'package:your_app/generated/icons.dart';

SvgPicture.asset(
  AppIcons.icSettings,
  width: 24,
  height: 24,
)
```

### Using Images

```dart
import 'package:your_app/generated/images.dart';

Image.asset(
  AppImages.logo,
  width: 200,
)
```

## pubspec.yaml Configuration

Register your assets in `pubspec.yaml`:

```yaml
flutter:
  assets:
    - assets/icons/
    - assets/images/
    - assets/images/2.0x/
    - assets/images/3.0x/
```

## Configuration Reference

### flutter

| Option          | Type   | Required | Default | Description                             |
| --------------- | ------ | -------- | ------- | --------------------------------------- |
| `output`        | String | Yes      | -       | Path to output directory for Dart files |
| `templatesPath` | String | No       | -       | Path to custom Stencil templates        |

### flutter.colors

| Option      | Type   | Required | Default       | Description          |
| ----------- | ------ | -------- | ------------- | -------------------- |
| `output`    | String | No       | `colors.dart` | Output filename      |
| `className` | String | No       | `AppColors`   | Generated class name |

### flutter.icons

| Option      | Type   | Required | Default      | Description                        |
| ----------- | ------ | -------- | ------------ | ---------------------------------- |
| `output`    | String | Yes      | -            | Path for SVG asset files           |
| `dartFile`  | String | No       | `icons.dart` | Output filename for Dart constants |
| `className` | String | No       | `AppIcons`   | Generated class name               |

### flutter.images

| Option                 | Type   | Required | Default       | Description                           |
| ---------------------- | ------ | -------- | ------------- | ------------------------------------- |
| `output`               | String | Yes      | -             | Path for image asset files            |
| `dartFile`             | String | No       | `images.dart` | Output filename for Dart constants    |
| `className`            | String | No       | `AppImages`   | Generated class name                  |
| `format`               | String | No       | `png`         | Image format: `svg`, `png`, or `webp` |
| `scales`               | Array  | No       | `[1, 2, 3]`   | Asset scales to generate              |
| `webpOptions.encoding` | String | No       | -             | WebP encoding: `lossy` or `lossless`  |
| `webpOptions.quality`  | Number | No       | -             | Quality (0-100) for lossy encoding    |

## Tips

1. **Use WebP** for smaller image sizes
2. **Use SVG** for icons to reduce bundle size
3. **Only include necessary scales**: `[2, 3]` for most modern devices
4. **Post-export optimization** for PNG format:
   ```bash
   oxipng -o max -Z ./assets/images/**/*.png
   ```

## Troubleshooting

### WebP encoding quality not specified

When using `format: webp` with `encoding: lossy`, you must specify a quality value:

```yaml
flutter:
  images:
    format: webp
    webpOptions:
      encoding: lossy
      quality: 90  # Required for lossy encoding
```

For lossless encoding, quality is not required.

## See Also

- <doc:Configuration>
- <doc:DesignRequirements>
- <doc:CustomTemplates>
